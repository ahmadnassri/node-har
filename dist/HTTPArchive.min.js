/*!
 * HTTPArchive.js v1.0.4 (https://github.com/codeinchaos/httparchive.js.git)
 * Copyright 2014 Ahmad Nassri
 * Licensed under https://github.com/codeinchaos/httparchive.js/blob/master/LICENSE
 */

!function(a){"use strict";var b=a.HTTPArchiveLog=function(a,b){this._strict=void 0===b?!0:b,Object.defineProperties(this,{_strict:{enumerable:!1,writable:!0,value:!0},props:{enumerable:!1,configurable:!1,value:{_pages:[],_entries:[]}},comment:{enumerable:!0,writable:!0,value:void 0},version:{enumerable:!0,writable:!0,value:1.2},creator:{enumerable:!0,writable:!0,value:{name:"HTTPArchive.js",version:"1.0.0"}},browser:{enumerable:!0,writable:!0,value:void 0},pages:{enumerable:!0,get:function(){return this.props._pages},set:function(a){if(!Array.isArray(a))throw new Error("invalid HTTPArchivePage object.");for(var b in a)this.addPage(a[b])}},entries:{enumerable:!0,get:function(){return this.props._entries},set:function(a){if(!Array.isArray(a))throw new Error("invalid HTTPArchiveEntry object.");for(var b in a)this.addEntry(a[b])}}}),this.setOptions(a)};b.prototype.addPage=function(a){return a instanceof HTTPArchivePage||(a=new HTTPArchivePage(a)),this.props._pages.push(a),a},b.prototype.addEntry=function(a){return a instanceof HTTPArchiveEntry||(a=new HTTPArchiveEntry(a)),this.props._entries.push(a),a}}(window||this),function(a){"use strict";a.HTTPArchivePage=function(a,b){this._strict=void 0===b?!0:b,Object.defineProperties(this,{_strict:{enumerable:!1,writable:!0},comment:{enumerable:!0,writable:!0,value:void 0},id:{enumerable:!0,writable:!0,value:Math.floor(11*Math.random())},title:{enumerable:!0,writable:!0,value:null},pageTimings:{enumerable:!0,writable:!0,value:{onContentLoad:0,onLoad:0}},props:{enumerable:!1,configurable:!1,value:{_startedDateTime:new Date}},startedDateTime:{enumerable:!0,get:function(){return this.props._startedDateTime},set:function(a){if(!(a instanceof Date))try{a=new Date(a)}catch(b){throw new Error("invalid date object.")}this.props._startedDateTime=a}}}),this.setOptions(a)}}(window||this),function(a){"use strict";a.HTTPArchiveEntry=function(a,b){this._strict=void 0===b?!0:b,Object.defineProperties(this,{_strict:{enumerable:!1,writable:!0,value:!0},pageref:{enumerable:!0,writable:!0,value:void 0},cache:{enumerable:!0,writable:!0,value:{}},serverIPAddress:{enumerable:!0,writable:!0,value:void 0},connection:{enumerable:!0,writable:!0,value:void 0},comment:{enumerable:!0,writable:!0,value:void 0},timings:{enumerable:!0,writable:!0,value:{dns:0,connect:0,blocked:0,send:0,wait:0,receive:0}},props:{enumerable:!1,configurable:!1,value:{_startedDateTime:new Date,_time:new Date,_request:null,_response:null}},startedDateTime:{enumerable:!0,get:function(){return this.props._startedDateTime},set:function(a){if(!(a instanceof Date))try{a=new Date(a)}catch(b){throw new Error("invalid date object.")}this.props._startedDateTime=a}},time:{enumerable:!0,get:function(){return this.props._time},set:function(a){if("number"!=typeof a)throw new Error("invalid time value.");this.props._time=a}},request:{enumerable:!0,get:function(){return this.props._request},set:function(a){if(!(a instanceof HTTPArchiveRequest))try{a=new HTTPArchiveRequest(a)}catch(b){throw new Error("invalid request object.")}this.props._request=a}},response:{enumerable:!0,get:function(){return this.props._response},set:function(a){if(!(a instanceof HTTPArchiveResponse))try{a=new HTTPArchiveResponse(a)}catch(b){throw new Error("invalid response object.")}this.props._response=a}}}),this.setOptions(a)}}(window||this),function(a){"use strict";var b=/\b(https?|ftp):\/\/([\-A-Z0-9.]+)(\/[\-A-Z0-9+&@#\/%=~_|!:,.;]*)?(\?[A-Z0-9+&@#\/%=~_|!:,.;]*)?/i,c=a.HTTPArchiveRequest=function(a,b){this._strict=void 0===b?!0:b,Object.defineProperties(this,{_strict:{enumerable:!1,writable:!0,value:!0},method:{enumerable:!0,writable:!0,value:null},url:{enumerable:!0,writable:!0,value:null},httpVersion:{enumerable:!0,writable:!0,value:"HTTP/1.1"},queryString:{enumerable:!0,writable:!0,value:[]},bodySize:{enumerable:!0,writable:!0,value:0},comment:{enumerable:!0,writable:!0,value:void 0},props:{enumerable:!1,configurable:!1,value:{_headers:{},_cookies:{}}},headersSize:{enumerable:!0,get:function(){var a=this.printHeaders();return a.length>0?a.length:-1},set:function(){return this}},headers:{enumerable:!0,get:function(){var a=[];for(var b in this.props._headers)a.push({name:b,value:this.props._headers[b]});return a},set:function(a){if(!Array.isArray(a))throw new Error("invalid headers array. expected Array, instead got "+typeof a);return 0===a.length?this.props._headers={}:a.forEach(this.setHeader,this),this}},cookies:{enumerable:!0,get:function(){var a=[];for(var b in this.props._cookies){var c=this.props._cookies[b];c.name=b,a.push(c)}return a},set:function(a){if(!Array.isArray(a))throw new Error("invalid cookies array. expected Array, instead got "+typeof a);a.forEach(this.setCookie,this)}}}),this.setOptions(a)};c.prototype.getHeader=function(a){return this.props._headers[a]},c.prototype.hasHeader=function(a){return this.props._headers.hasOwnProperty(a)},c.prototype.removeHeader=function(a){return delete this.props._headers[a],this},c.prototype.setHeader=function(a,b){if("object"==typeof a){if(!a.hasOwnProperty("name")||!a.hasOwnProperty("value"))throw new Error("invalid header object");this.setHeader(a.name,a.value)}else this.props._headers[a]=b;return this},c.prototype.printHeaders=function(){if(0===Object.keys(this.props._headers).length)return"";var a=[],c=b.exec(this.url),d=c[4]?c[3]+c[4]:c[3];a.push(this.method+" "+d+" "+this.httpVersion);for(var e in this.props._headers)a.push(e+": "+this.props._headers[e]);return a.join("\r\n")+"\r\n\r\n"},c.prototype.getCookieObject=function(a){return this.props._cookies[a]},c.prototype.getCookie=function(a){return this.props._cookies[a].value},c.prototype.hasCookie=function(a){return this.props._cookies.hasOwnProperty(a)},c.prototype.setCookie=function(a,b,c,d,e,f,g,h){if("object"==typeof arguments[0])return this.setCookie.apply(this,[arguments[0].name,arguments[0].value,arguments[0].path,arguments[0].domain,arguments[0].expires,arguments[0].httpOnly,arguments[0].secure,arguments[0].comment]);if(void 0===a||void 0===b)throw new Error("cookie must have a name and value");return this.props._cookies[a]={name:a,value:b,path:c||"/",domain:d||"",expires:void 0!==e?e:(new Date).toISOString(),httpOnly:f||!1,secure:g||!1,comment:h||""},this}}(window||this),function(a){"use strict";var b=a.HTTPArchiveResponse=function(a,b){this._strict=void 0===b?!0:b,Object.defineProperties(this,{_strict:{enumerable:!1,writable:!0,value:!0},status:{enumerable:!0,writable:!0,value:0},statusText:{enumerable:!0,writable:!0,value:""},httpVersion:{enumerable:!0,writable:!0,value:"HTTP/1.1"},redirectURL:{enumerable:!0,writable:!0,value:""},headersSize:{enumerable:!0,writable:!0,value:0},bodySize:{enumerable:!0,writable:!0,value:0},content:{enumerable:!0,writable:!0,value:{size:0,mimeType:"",text:""}},cookies:{enumerable:!0,writable:!0,value:[]},headers:{enumerable:!0,writable:!0,value:[]},comment:{enumerable:!0,writable:!0,value:void 0}}),this.setOptions(a)};b.prototype.addCookie=function(a,b){return this.cookies.push({name:a,value:b}),this},b.prototype.addHeader=function(a,b){return this.headers.push({name:a,value:b}),this}}(window||this),function(){"use strict";HTTPArchiveLog.prototype.setOptions=HTTPArchiveRequest.prototype.setOptions=HTTPArchiveResponse.prototype.setOptions=HTTPArchivePage.prototype.setOptions=HTTPArchiveEntry.prototype.setOptions=function(a){if(0===arguments.length||void 0===a)throw new Error("constructor called with no arguments, expected options.");if("object"!=typeof a||Array.isArray(a))throw new Error("invalid options object.");for(var b in a)if(a.hasOwnProperty(b)){if(this._strict&&!this.hasOwnProperty(b))throw new Error("invalid options object. ["+b+"].");this[b]=a[b]}},HTTPArchiveLog.prototype.toJSON=HTTPArchiveRequest.prototype.toJSON=HTTPArchiveResponse.prototype.toJSON=HTTPArchivePage.prototype.toJSON=HTTPArchiveEntry.prototype.toJSON=function(){var a={};for(var b in this){var c=this[b];if(this.hasOwnProperty(b)&&void 0!==c){if(null===c){a[b]=c;continue}if(c instanceof Date)a[b]=c.toISOString();else if(c.toJSON)a[b]=c.toJSON();else if(Array.isArray(c)){for(var d in c)c[d].toJSON&&(c[d]=c[d].toJSON());a[b]=c}else a[b]=c}}return a}}(window||this);